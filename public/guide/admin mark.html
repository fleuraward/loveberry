<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="darkreader-lock" content="">
    <title>loveberry ♡ guide ♡ comment admin mark</title>
    
  <link rel="icon" type="image/x-icon" href="/assets/images/berry.ico">
  <link rel="shortcut icon" href="/assets/images/berry.ico" type="image/x-icon">

  <!-- METADATA -->
  <meta name="description" content="loveberry - your home for website resources">
  <meta name="theme-color" content="#f9a5b9">

  <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
        
    
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
  </head>
<body>

<div class="sidebar">  
<div class="buttonadj">
    <button type="button" data-theme-toggle aria-label="Change to light theme" class="decocorner"> </button>
    <script>
      /**
      * Utility function to calculate the current theme setting.
      * Look for a local storage value.
      * Fall back to system setting.
      * Fall back to light mode.
      */
      function calculateSettingAsThemeString({ localStorageTheme, systemSettingDark }) {
        if (localStorageTheme !== null) {
          return localStorageTheme;
        }
    
        if (systemSettingDark.matches) {
          return "dark";
        }
    
        return "light";
      }
    
      /**
      * Utility function to update the button text, aria-label, and toggle class.
      */
      // Modified updateButton to accept an optional "animate" flag
function updateButton({ buttonEl, isDark, animate = true }) {
  const newCta = isDark ? "Change to light theme" : "Change to dark theme";
  buttonEl.setAttribute("aria-label", newCta);

  if (animate) {
    buttonEl.classList.remove("on", "off");
    void buttonEl.offsetWidth;
    buttonEl.classList.add(isDark ? "on" : "off");
  } else {
    // Ensure no animation classes are set initially
    buttonEl.classList.remove("on", "off");
  }
}
    
      /**
      * Utility function to update the theme setting on the html tag
      */
      function updateThemeOnHtmlEl({ theme }) {
        document.querySelector("html").setAttribute("data-theme", theme);
      }
    
      /**
      * On page load:
      */
    
      // 1. Grab what we need from the DOM and system settings on page load
      const button = document.querySelector("[data-theme-toggle]");
      const localStorageTheme = localStorage.getItem("theme");
      const systemSettingDark = window.matchMedia("(prefers-color-scheme: dark)");
    
      // 2. Work out the current site settings
      let currentThemeSetting = calculateSettingAsThemeString({ localStorageTheme, systemSettingDark });
    
      
      // 3. Update the theme setting and button text/class according to current settings
      updateButton({ buttonEl: button, isDark: currentThemeSetting === "dark", animate: false });
      updateThemeOnHtmlEl({ theme: currentThemeSetting });
    
      // 4. Add an event listener to toggle the 
      button.addEventListener("click", () => {
  const newTheme = currentThemeSetting === "dark" ? "light" : "dark";

  localStorage.setItem("theme", newTheme);
  updateButton({ buttonEl: button, isDark: newTheme === "dark", animate: true });
  updateThemeOnHtmlEl({ theme: newTheme });

  currentThemeSetting = newTheme;
});
    </script>
    </div>
<nav>
<ul class="nav">
    <li><a href="/">Home</a></li>
    <li><a href="/resources">Resources</a></li>
    <li><a href="/links">Links</a></li>
    <li><a href="https://layercake.nekoweb.org">Creator</a></li>
</ul>
</nav>

</div>
<div class="content">
    <div class="main">
        
    <header>
        
        <div class="marquee">
            <ul class="marquee__content">
              <li><h1>Loveberry</h1></li>
              <li aria-hidden="true"><h1>Loveberry</h1></li>
              <li aria-hidden="true"><h1>Loveberry</h1></li>
            </ul>
            <!-- Mirrors the content above -->
            <ul class="marquee__content" aria-hidden="true">
              <li><h1>Loveberry</h1></li>
              <li><h1>Loveberry</h1></li>
              <li><h1>Loveberry</h1></li>
            </ul>
          </div>
            </header>
            <main>
                <div class="mainb">
                        <h2 class="grad italics">How to add an [admin] mark to ayano's comment widget</h2>
<p>This silly little thing is inspired by <a class="outbound" href="https://frills.dev/blog/231023-add-moderation-to-comment-widget/">Frills' moderation add-on to Virtual Observer's comment widget</a>, yet this allows you
    to add a pixel or some other image or text related identifier after your name in your own comments. This is so you can identify your own posts within your comment widget, as well as reduce the risk of impersonation.
    This also follows similar additions to the code that Frills' does in her own moderation add-on, and similarly would need you to verify your own identity for each comment in the google sheet.</p>

    <ol>
        <li>Go to the google form that you set up for your comment widget and add a new short-answer text question at the bottom.</li>
        <li>Name this question 'Admin'. Make sure the first letter has a capital letter, as the code is case sensitive.</li>
        <li>From your Google form, press the three dots in the top left corner and then 'Get pre-filled link'. This will open a
          new tab with your form, as if you were answering it. Fill in every field with the same name as its respective title and then press 'Get link'.</li>
        <li>Paste the link into a text editor and collect the number after the final 'admin' entry. which should have the value that you filled in: 'Admin'. It will look something like this: 
          <mark>&amp;entry.1234567890=Admin</mark></li>
          <li>In the Javascript file for the comment widget, you want to find your <mark>const s_textId = '1234567890'</mark> and below (or below the moderated widget if
            you also have that added) you add the code below, but with the number you got from step 4 <div class="fakearea" contenteditable="true">const s_adminId = '1234567890'</div></li>
            <li>Next, we need to make the 'admin' variable automatically false within your google sheet; to do this find the line <mark>id="entry.${s_textId}"</mark> and below this line, add:
              <div class="fakearea" contenteditable="true">
            &lt;input name="entry.${s_adminId}" id="entry.${s_adminId}" type="hidden" readonly value="false"&gt;</div></li>
            <li>After this, find <mark>name.className = 'c-name';</mark> and add:
              <div class="fakearea" contenteditable="true">
              if(data.Admin == true) { <br>
                name.insertAdjacentHTML('beforeend', " &lt;img src='IMAGE URL' style='width:15px; height:15px' title='admin' alt='admin'&gt; "); <br>
              }
          </div>
            Make sure to change "IMAGE URL" to your own pixel, as well as alter the width and height if needed! If you would rather have text instead of an image, you can change the <mark>&lt;img src='IMAGE URL' style='width:15px; height:15px' title='admin' alt='admin'&gt;</mark> to <mark>&lt;span class='adminmark'&gt;[Admin]&lt;/span&gt;</mark>, adding a class will allow you to style it within the CSS file.
          </li>
          <li>You've got it all set up, but your last instruction for security reasons is to remove the "admin" question on your google form! This is so no one can try to bypass and fill this section in through the hidden iframe!</li>
      </ol>
                        
                        <hr>
                        
                        <a href="/resources/snippets/">Go back?</a>
                </div>
</main>
    </div>
</div>

</body>
</html>